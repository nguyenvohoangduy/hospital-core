{"filter":false,"title":"AuthController.php","tooltip":"/app/Http/Controllers/Auth/AuthController.php","undoManager":{"mark":3,"position":3,"stack":[[{"start":{"row":4,"column":0},"end":{"row":5,"column":36},"action":"remove","lines":["use Illuminate\\Http\\Request;","use App\\Http\\Controllers\\Controller;"],"id":2},{"start":{"row":4,"column":0},"end":{"row":8,"column":13},"action":"insert","lines":["use App\\Http\\Requests\\RegisterFormRequest;","use Illuminate\\Support\\Facades\\Auth;","use Tymon\\JWTAuth\\Facades\\JWTAuth;","use Illuminate\\Http\\Request;","use App\\User;"]}],[{"start":{"row":0,"column":0},"end":{"row":14,"column":0},"action":"remove","lines":["<?php","","namespace App\\Http\\Controllers\\Auth;","","use App\\Http\\Requests\\RegisterFormRequest;","use Illuminate\\Support\\Facades\\Auth;","use Tymon\\JWTAuth\\Facades\\JWTAuth;","use Illuminate\\Http\\Request;","use App\\User;","","class AuthController extends Controller","{","    //","}",""],"id":3},{"start":{"row":0,"column":0},"end":{"row":74,"column":1},"action":"insert","lines":["<?php","namespace App\\Http\\Controllers;","use App\\Http\\Requests\\RegisterFormRequest;","use Illuminate\\Support\\Facades\\Auth;","use Tymon\\JWTAuth\\Facades\\JWTAuth;","use Illuminate\\Http\\Request;","use App\\User;","class AuthController extends Controller","{","    public function register(RegisterFormRequest $request)","    {","        $user = new User;","        $user->email = $request->email;","        $user->name = $request->name;","        $user->password = bcrypt($request->password);","        $user->save();","        return response([","            'status' => 'success',","            'data' => $user","        ], 200);","    }","    public function login(Request $request)","    {","        $credentials = $request->only('email', 'password');","        if (!$token = JWTAuth::attempt($credentials)) {","            return response([","                'status' => 'error',","                'error' => 'invalid.credentials',","                'msg' => 'Invalid Credentials.'","            ], 400);","        }","        return response([","            'status' => 'success',","            'token' => $token","        ]);","    }","    public function user(Request $request)","    {","        $user = User::find(Auth::user()->id);","        return response([","            'status' => 'success',","            'data' => $user","        ]);","    }","    /**","     * Log out","     * Invalidate the token, so user cannot use it anymore","     * They have to relogin to get a new token","     *","     * @param Request $request","     */","    public function logout(Request $request) {","        $this->validate($request, ['token' => 'required']);","        ","        try {","            JWTAuth::invalidate($request->input('token'));","            return response([","            'status' => 'success',","            'msg' => 'You have successfully logged out.'","        ]);","        } catch (JWTException $e) {","            // something went wrong whilst attempting to encode the token","            return response([","                'status' => 'error',","                'msg' => 'Failed to logout, please try again.'","            ]);","        }","    }","    public function refresh()","    {","        return response([","            'status' => 'success'","        ]);","    }","}"]}],[{"start":{"row":1,"column":31},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":1,"column":30},"end":{"row":1,"column":31},"action":"insert","lines":["\\"],"id":5},{"start":{"row":1,"column":31},"end":{"row":1,"column":32},"action":"insert","lines":["A"]},{"start":{"row":1,"column":32},"end":{"row":1,"column":33},"action":"insert","lines":["u"]},{"start":{"row":1,"column":33},"end":{"row":1,"column":34},"action":"insert","lines":["t"]},{"start":{"row":1,"column":34},"end":{"row":1,"column":35},"action":"insert","lines":["h"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":1,"column":35},"end":{"row":1,"column":35},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":6,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1535782622565,"hash":"af8349ce2d4a6850228d8c5f99017a66775bdefb"}